{% extends "layout.html" %}

{% block content %}
<div class="bento-grid animate-enter">
  <!-- User Info -->
  <div class="bento-card span-4" id="userInfo">
    <div style="text-align: center; padding: 2rem;">
      <i class="ri-loader-4-line ri-spin" style="font-size: 2rem;"></i><br>Loading device details...
    </div>
  </div>

  <!-- Charts Row -->
  <div class="bento-card span-2">
    <div class="card-header">
      <span class="card-title">Top Domains Visited</span>
    </div>
    <div style="height: 220px;">
      <canvas id="userDomainChart"></canvas>
    </div>
  </div>

  <div class="bento-card span-2">
    <div class="card-header">
      <span class="card-title">Traffic History</span>
    </div>
    <div style="height: 220px; display: flex; align-items: center; justify-content: center; color: var(--text-muted);">
      Chart Placeholder
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="bento-card span-4">
    <div class="card-header">
      <span class="card-title">Recent Activity</span>
    </div>
    <div style="overflow-x: auto;">
      <table class="modern-table">
        <thead>
          <tr>
            <th>Time</th>
            <th>Domain / Host</th>
            <th>Protocol</th>
            <th>Size</th>
          </tr>
        </thead>
        <tbody id="userLogs">
          <!-- Logs -->
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
  const userIp = "{{ user_ip }}";
</script>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}?v=2"></script>
<!-- Reusing Dashboard.js for user page logic -->
{% endblock %}